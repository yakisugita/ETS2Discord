# ETS2Discord
## 概要
ETS2からETS2 TelemetryServerを使用してデータを取得し、Discordに情報を表示するツールです。

ツール名:ETS2DiscordRichPresence.exe

制作者:焼きすぎた鮭 Twitter:@\_yakisugita_

## 利用に関して
ツールの使用は自己責任でお願いします。

二次配布・改変やその配布はOKです。ただし自作発言はNG

## 開発環境
- Windows 10 Home 21H1
- Visual Studio 2019

## 動作環境
.NET Framework 4.7.2で動作します。

ETS2TelemetryServerはv4.0およびv4.1.2.3で動作を確認しています。

## 使い方
### 更新に関して
設定ファイル(ets2discord.ini)は前のバージョンのものをそのまま使えます。
本体と同じディレクトリに「noupdate」というファイルを作っておくと、勝手に更新を確認しません。

### 導入方法

ツールのzipファイルをダウンロード・解凍

https://yakijake.net/versions/ETS2DRP/

まずETS2DRP_initial.exeを起動してください

 - TelemetryServerが導入済みの場合
TelemetryServerに表示されている「Telemetry API URL」をinitial.exeの入力ボックスに打ち込み、「入力完了」をクリックしてください。

 - 導入していない場合
「ダウンロードします」と出てきたら「OK」を押してください。zipファイルがダウンロードされます。

zipファイルを7-zip等で解凍し、Telemetry Server Setup 4.x.x.x.exeを起動してください。xはバージョンによって異なります。理由なければ最新版のものにしてください。

言語を選んだら「OK」「次へ」。インストールするものを選んだら(基本そのままでOK)「次へ」。インストールができたら「完了」を押してください。zipファイルがダウンロードされます。

スタートメニューに「Telemetry Server v4.x.x.x」が追加されているので、それを起動してください。

起動したら右下の「Install」をクリックしてください。

パスが見つからないよ！(Could not detect ＜ゲーム名＞ (以下略))というエラーが出たら、正しいパスを入れてください。そのゲームを持ってない場合は「キャンセル」

インストールが終わって「OK」を押すと、ウィンドウが立ち上がります。

「Telemetry API URL」のURLを、ETS2DRP_initial.exeの入力ボックスに打ち込み、「入力完了」をクリックしてください。


 - 導入完了
ETS2をプレイしてみて、実際に表示されるか試してみて下さい。

※セーブデータを読み込んで、トラックに乗る(道路などが読み込まれる)まではDiscordに表示されません

## TruckersMPの表示について
Trucky APIを使用して情報を取得しています。
TruckersMPのゲーム内設定で、「general」タブの「Discord Rich Presence」のチェックを外すと、このツールのものが表示されるようになります。

## 更新履歴
 - 2021/11/21 v1.4
     - フィードバック送信機能追加、スタートアップ登録機能追加、マテリアルアイコン、オンラインマニュアルへの案内
 - 2021/10/06 v1.3
     - 全設定の即時変更,カスタムテキスト「ステータス」廃止,「荷物の名前」「報酬」「重量」を追加,デフォルトAPI URLの変更,更新で変更されたファイルのみダウンロード,ゲーム終了時の更新確認,シャットダウン時に勝手に終了
 - 2021/09/03 v1.2.2
     - 「このツールについて」のURL変更,終了時の挙動改善
 - 2021/08/30 v1.2.1
     - カスタムテキストの不具合修正,エラーログ
 - 2021/08/27 v1.2
     - カスタムテキスト機能,右クリメニューから表示,ETS2TSv4.1.2.3へ対応
 - 2021/08/11 v1.1.1
     - 「このツールについて」を追加,StatusCodeのチェック
 - 2021/08/05 v1.1
     - 更新機能強化,ATSへの対応,Discordにアイコン表示,著作権表示,TruckersMPのサーバー・ID等の表示
 - 2021/07/31 v1.0.1
     - 誤字修正,プレイ時間表示,新バージョン通知の改修,アイコン変更
 - 2021/07/25 v1.0
     - 公開
